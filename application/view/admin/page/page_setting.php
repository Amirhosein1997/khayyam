<?php
$this->include('admin.layouts.header');
?>





<!DOCTYPE html>
<head>
    <title>پیکربندی صفحه جدید</title>
</head>


<div class="alert alert-success" role="alert">
    <h4 class="alert-heading">تنظیمات صفحات</h4>
    <p>
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-pin-angle-fill" viewBox="0 0 16 16">
            <path d="M9.828.722a.5.5 0 0 1 .354.146l4.95 4.95a.5.5 0 0 1 0 .707c-.48.48-1.072.588-1.503.588-.177 0-.335-.018-.46-.039l-3.134 3.134a5.927 5.927 0 0 1 .16 1.013c.046.702-.032 1.687-.72 2.375a.5.5 0 0 1-.707 0l-2.829-2.828-3.182 3.182c-.195.195-1.219.902-1.414.707-.195-.195.512-1.22.707-1.414l3.182-3.182-2.828-2.829a.5.5 0 0 1 0-.707c.688-.688 1.673-.767 2.375-.72a5.922 5.922 0 0 1 1.013.16l3.134-3.133a2.772 2.772 0 0 1-.04-.461c0-.43.108-1.022.589-1.503a.5.5 0 0 1 .353-.146z"/>
        </svg>برای افزودن ابزارک جدید به سایت به دو ورودی نیاز است .<br>
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-pin-angle-fill" viewBox="0 0 16 16">
            <path d="M9.828.722a.5.5 0 0 1 .354.146l4.95 4.95a.5.5 0 0 1 0 .707c-.48.48-1.072.588-1.503.588-.177 0-.335-.018-.46-.039l-3.134 3.134a5.927 5.927 0 0 1 .16 1.013c.046.702-.032 1.687-.72 2.375a.5.5 0 0 1-.707 0l-2.829-2.828-3.182 3.182c-.195.195-1.219.902-1.414.707-.195-.195.512-1.22.707-1.414l3.182-3.182-2.828-2.829a.5.5 0 0 1 0-.707c.688-.688 1.673-.767 2.375-.72a5.922 5.922 0 0 1 1.013.16l3.134-3.133a2.772 2.772 0 0 1-.04-.461c0-.43.108-1.022.589-1.503a.5.5 0 0 1 .353-.146z"/>
        </svg>در بخش اول شما محتوی لازم برای نمایش ابزارک را مشخص می کنید .<br>
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-pin-angle-fill" viewBox="0 0 16 16">
            <path d="M9.828.722a.5.5 0 0 1 .354.146l4.95 4.95a.5.5 0 0 1 0 .707c-.48.48-1.072.588-1.503.588-.177 0-.335-.018-.46-.039l-3.134 3.134a5.927 5.927 0 0 1 .16 1.013c.046.702-.032 1.687-.72 2.375a.5.5 0 0 1-.707 0l-2.829-2.828-3.182 3.182c-.195.195-1.219.902-1.414.707-.195-.195.512-1.22.707-1.414l3.182-3.182-2.828-2.829a.5.5 0 0 1 0-.707c.688-.688 1.673-.767 2.375-.72a5.922 5.922 0 0 1 1.013.16l3.134-3.133a2.772 2.772 0 0 1-.04-.461c0-.43.108-1.022.589-1.503a.5.5 0 0 1 .353-.146z"/>
        </svg>در بخش دوم کد svg تصویر مربوط به ابزارک مورد نظر را قرار دهید.<br>
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-pin-angle-fill" viewBox="0 0 16 16">
            <path d="M9.828.722a.5.5 0 0 1 .354.146l4.95 4.95a.5.5 0 0 1 0 .707c-.48.48-1.072.588-1.503.588-.177 0-.335-.018-.46-.039l-3.134 3.134a5.927 5.927 0 0 1 .16 1.013c.046.702-.032 1.687-.72 2.375a.5.5 0 0 1-.707 0l-2.829-2.828-3.182 3.182c-.195.195-1.219.902-1.414.707-.195-.195.512-1.22.707-1.414l3.182-3.182-2.828-2.829a.5.5 0 0 1 0-.707c.688-.688 1.673-.767 2.375-.72a5.922 5.922 0 0 1 1.013.16l3.134-3.133a2.772 2.772 0 0 1-.04-.461c0-.43.108-1.022.589-1.503a.5.5 0 0 1 .353-.146z"/>
        </svg>لطفا در هنگام قرار دادن کد svg ، ویژگی طول (Height) و عرض (Width) آن را حذف نمایید.<br>
    </p>
    <hr>
    <p class="mb-0"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-pin-angle-fill" viewBox="0 0 16 16">
            <path d="M9.828.722a.5.5 0 0 1 .354.146l4.95 4.95a.5.5 0 0 1 0 .707c-.48.48-1.072.588-1.503.588-.177 0-.335-.018-.46-.039l-3.134 3.134a5.927 5.927 0 0 1 .16 1.013c.046.702-.032 1.687-.72 2.375a.5.5 0 0 1-.707 0l-2.829-2.828-3.182 3.182c-.195.195-1.219.902-1.414.707-.195-.195.512-1.22.707-1.414l3.182-3.182-2.828-2.829a.5.5 0 0 1 0-.707c.688-.688 1.673-.767 2.375-.72a5.922 5.922 0 0 1 1.013.16l3.134-3.133a2.772 2.772 0 0 1-.04-.461c0-.43.108-1.022.589-1.503a.5.5 0 0 1 .353-.146z"/>
        </svg> اگر نیاز به افزودن بیش از یک ابزارک دارید لطفا روی " + افزودن ابزارک " کلیک کنید.</p>
</div>
<hr>
<?php
/*$template_pages=scandir("template_page/");
$files = array_diff($template_pages, array('.', '..'));
insert_template_pages($files);*/
?>
<div class="accordion" id="accordionExample">
    <div class="accordion-item">
        <h2 class="accordion-header" id="headingOne">
            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-tools" viewBox="0 0 16 16">
                    <path d="M1 0 0 1l2.2 3.081a1 1 0 0 0 .815.419h.07a1 1 0 0 1 .708.293l2.675 2.675-2.617 2.654A3.003 3.003 0 0 0 0 13a3 3 0 1 0 5.878-.851l2.654-2.617.968.968-.305.914a1 1 0 0 0 .242 1.023l3.27 3.27a.997.997 0 0 0 1.414 0l1.586-1.586a.997.997 0 0 0 0-1.414l-3.27-3.27a1 1 0 0 0-1.023-.242L10.5 9.5l-.96-.96 2.68-2.643A3.005 3.005 0 0 0 16 3c0-.269-.035-.53-.102-.777l-2.14 2.141L12 4l-.364-1.757L13.777.102a3 3 0 0 0-3.675 3.68L7.462 6.46 4.793 3.793a1 1 0 0 1-.293-.707v-.071a1 1 0 0 0-.419-.814L1 0Zm9.646 10.646a.5.5 0 0 1 .708 0l2.914 2.915a.5.5 0 0 1-.707.707l-2.915-2.914a.5.5 0 0 1 0-.708ZM3 11l.471.242.529.026.287.445.445.287.026.529L5 13l-.242.471-.026.529-.445.287-.287.445-.529.026L3 15l-.471-.242L2 14.732l-.287-.445L1.268 14l-.026-.529L1 13l.242-.471.026-.529.445-.287.287-.445.529-.026L3 11Z"/>
                </svg>
                مدیریت گروه صفحات
            </button>
        </h2>
        <div id="collapseOne" class="accordion-collapse collapse" aria-labelledby="headingOne" data-bs-parent="#accordionExample">
            <div class="accordion-body">
                <!DOCTYPE html>
                <head>
                    <title>ایجاد گروه صفحات</title>
                </head>




                    <form style="padding: 30px;background-color: #884148;" method="post" enctype="multipart/form-data" action="<?php $this->url('page/insert_group_page'); ?>">
                        <div class="mb-3">
                            <label for="exampleInput1" class="form-label">عنوان گروه</label>
                            <input name="info[title]" type="text" class="form-control" id="exampleInput1" >
                        </div>
                        <div class="mb-3">
                            <label for="exampleInput2" class="form-label">شرح گروه</label>
                            <input name="info[description]" type="text" class="form-control" id="exampleInput2">
                        </div>
                        <div class="mb-3">
                            <label for="exampleInput3" class="form-label">وضعیت گروه</label>
                            <select name="info[status]" class="form-select" aria-label="Default select example" id="exampleInput3">
                                <option selected disabled>__وضعیت گروه را انتخاب کنید</option>
                                <option value="on">__on</option>
                                <option value="off">__off</option>
                            </select>
                        </div>

                        <button name="send" type="submit" class="btn btn-primary">ثبت</button>
                    </form>

                <hr>
                <!DOCTYPE html>
                <head>
                    <title>لیست گروه صفحات ایجاد شده</title>
                </head>
                <?php

                    $group_page_records=$this->group_page_callback();
                    ?>




                    <table class="table table-dark table-hover table-sm">
                        <thead>
                        <tr>
                            <th scope="col">ردیف</th>
                            <th scope="col">کد</th>
                            <th scope="col">عنوان</th>
                            <th scope="col">نویسنده</th>
                            <th scope="col">تاریخ</th>
                            <th scope="col">تعداد صفحات</th>
                            <th scope="col">شرح</th>
                            <th scope="col">وضعیت</th>
                            <th scope="col">ویرایش</th>
                            <th scope="col">حذف</th>
                        </tr>
                        </thead>
                        <tbody>
                        <?php foreach ($group_page_records as $key=>$val): ?>
                            <tr>
                                <td><?php echo $key+1; ?></td>
                                <td><?php echo $val->code; ?></td>
                                <td><?php echo $val->title; ?></td>
                                <td><?php echo $val->author; ?></td>
                                <td><?php echo $val->date; ?></td>
                                <td><?php  /*$pages_records=select_pages($val->id);
                                    echo count($pages_records);*/
                                    ?>
                                </td>
                                <td><?php echo $val->description; ?></td>
                                <td><?php echo $val->status; ?></td>
                                <td><a class="btn btn-primary" href="<?php $this->url('Page/edit_group_page/'.$val->id); ?>" role="button">ویرایش</a></td>
                                <td><a class="btn btn-primary" href="<?php $this->url('Page/delete_group_page/'.$val->id); ?>" role="button">حذف</a></td>
                            </tr>
                        <?php endforeach;?>
                        </tbody>
                    </table>


            </div>
        </div>
    </div>
    <div class="accordion-item">
        <h2 class="accordion-header" id="headingTwo">
            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-tools" viewBox="0 0 16 16">
                    <path d="M1 0 0 1l2.2 3.081a1 1 0 0 0 .815.419h.07a1 1 0 0 1 .708.293l2.675 2.675-2.617 2.654A3.003 3.003 0 0 0 0 13a3 3 0 1 0 5.878-.851l2.654-2.617.968.968-.305.914a1 1 0 0 0 .242 1.023l3.27 3.27a.997.997 0 0 0 1.414 0l1.586-1.586a.997.997 0 0 0 0-1.414l-3.27-3.27a1 1 0 0 0-1.023-.242L10.5 9.5l-.96-.96 2.68-2.643A3.005 3.005 0 0 0 16 3c0-.269-.035-.53-.102-.777l-2.14 2.141L12 4l-.364-1.757L13.777.102a3 3 0 0 0-3.675 3.68L7.462 6.46 4.793 3.793a1 1 0 0 1-.293-.707v-.071a1 1 0 0 0-.419-.814L1 0Zm9.646 10.646a.5.5 0 0 1 .708 0l2.914 2.915a.5.5 0 0 1-.707.707l-2.915-2.914a.5.5 0 0 1 0-.708ZM3 11l.471.242.529.026.287.445.445.287.026.529L5 13l-.242.471-.026.529-.445.287-.287.445-.529.026L3 15l-.471-.242L2 14.732l-.287-.445L1.268 14l-.026-.529L1 13l.242-.471.026-.529.445-.287.287-.445.529-.026L3 11Z"/>
                </svg>
                مدیریت صفحات ایجاد شده

            </button>
        </h2>
        <div id="collapseTwo" class="accordion-collapse collapse" aria-labelledby="headingTwo" data-bs-parent="#accordionExample">
            <div class="accordion-body">
                <!DOCTYPE html>
                <head>
                    <title>مدیریت صفحات ایجاد شده</title>
                </head>

                    <?php
                    /*$on_grp_records=on_grp_page_callback();*/
                        ?>


                    <form style="background-color: #1c7430;padding: 30px;" method="post" enctype="multipart/form-data" action="<?php $this->url('Page/insert_page'); ?>">
                        <div class="mb-3">
                            <label for="exampleInput1" class="form-label">عنوان صفحه</label>
                            <input name="info[title]" type="text" class="form-control" id="exampleInput1" >
                        </div>
                        <div class="mb-3">
                            <label for="exampleInput2" class="form-label">گروه صفحه</label>
                            <select name="info[parent]" class="form-select" aria-label="Default select example" id="exampleInput3">
                                <option selected disabled>__ گروه را انتخاب کنید</option>
                                <?php foreach ($group_page_records as $record): ?>
                                    <option value="<?php echo $record->id;?>"><?php echo $record->title; ?></option>
                                <?php endforeach;?>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label for="exampleInput3" class="form-label">لینک صفحه</label>
                            <select name="info[link]" class="form-select" aria-label="Default select example" id="exampleInput3">
                                <option selected disabled>__صفحه را انتخاب کنید</option>
                                <?php $page_model=new \application\model\Page();
                                $template_links=$page_model->link_page();
                                foreach ($template_links as $link):?>
                                    <option value="<?php echo $link->link; ?>"><?php echo $link->name; ?></option>
                                <?php endforeach;?>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label for="exampleInput4" class="form-label">وضعیت صفحه</label>
                            <select name="info[status]" class="form-select" aria-label="Default select example" id="exampleInput4">
                                <option selected disabled>__وضعیت گروه را انتخاب کنید</option>
                                <option value="on">__on</option>
                                <option value="off">__off</option>
                            </select>
                        </div>

                        <button name="send_page" type="submit" class="btn btn-primary">ثبت</button>
                    </form>

                <hr>
                <!DOCTYPE html>
                <head>
                    <title>لیست صفحات ایجاد شده</title>
                </head>
                <?php


                    $page_records=$page_model->select_pages();

                    ?>




                    <table class="table table-dark table-hover table-sm">
                        <thead>
                        <tr>
                            <th scope="col">ردیف</th>
                            <th scope="col">کد</th>
                            <th scope="col">عنوان</th>
                            <th scope="col">لینک</th>
                            <th scope="col">گروه</th>
                            <th scope="col">نویسنده</th>
                            <th scope="col">تاریخ</th>
                            <th scope="col">وضعیت</th>
                            <th scope="col">ویرایش</th>
                            <th scope="col">حذف</th>
                        </tr>
                        </thead>
                        <tbody>
                        <?php foreach ($page_records as $key=>$val): ?>
                            <tr>
                                <td><?php echo $key+1 ?></td>
                                <td><?php echo $val->code; ?></td>
                                <td><?php echo $val->title; ?></td>
                                <td><?php echo $val->page_link; ?></td>
                                <td><?php echo $val->parent;
                                    ?>
                                </td>
                                <td><?php echo $val->author; ?></td>
                                <td><?php echo $val->date; ?></td>
                                <td><?php echo $val->status; ?></td>
                                <td><a class="btn btn-primary" href="<?php $this->url('Page/edit_page/'.$val->id); ?>" role="button">ویرایش</a></td>
                                <td><a class="btn btn-primary" href="<?php $this->url('Page/delete_page/'.$val->id); ?>" role="button">حذف</a></td>
                            </tr>
                        <?php endforeach;?>
                        </tbody>
                    </table>

            </div>
        </div>
    </div>

</div>






































<?php
$this->include('admin.layouts.footer');
?>
